(()=>{let e=document.querySelector("#copyQuery");e.addEventListener("click",(()=>{!async function(e,t){await navigator.clipboard.writeText(t),e.innerText="Copied!",await new Promise((e=>setTimeout(e,3e3))),e.innerText="Copy"}(e,document.querySelector("#generatedQuery").innerText)}));let t=document.querySelector("#form");t.addEventListener("submit",(async e=>{e.preventDefault(),e.stopPropagation();for(const e of t.elements)e.disabled=!0;let o=document.querySelector("#submit");o.innerText="Please Wait...";let r={username:document.querySelector("#username").value,password:document.querySelector("#password").value,host:document.querySelector("#host").value,port:parseInt(document.querySelector("#port").value),dbname:document.querySelector("#dbname").value,question:document.querySelector("#query").value};const n=JSON.stringify(r);try{let e=await fetch("/query/build",{method:"POST",body:n,headers:{"Content-Type":"application/json"}}),t=await e.json();console.log(t),t.ok?document.querySelector("#generatedQuery").innerHTML=t.message:console.log("show the goddamn error modal")}catch(e){console.log("show the goddamn error modal")}finally{for(const e of t.elements)e.disabled=!1;o.innerText="Submit"}}))})();