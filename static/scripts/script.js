(()=>{var e=!1;function t(t){e=!e,document.querySelector("#modalText").innerText=t,e?modal.classList.add("hidden"):modal.classList.remove("hidden")}let o=document.querySelector("#copyQuery");o.addEventListener("click",(()=>{!async function(e,t){await navigator.clipboard.writeText(t),e.innerText="Copied!",await new Promise((e=>setTimeout(e,3e3))),e.innerText="Copy"}(o,document.querySelector("#generatedQuery").innerText)}));let r=document.querySelector("#form");r.addEventListener("submit",(async e=>{e.preventDefault(),e.stopPropagation();for(const e of r.elements)e.disabled=!0;let o=document.querySelector("#submit");o.innerText="Please Wait...";let n={username:document.querySelector("#username").value,password:document.querySelector("#password").value,host:document.querySelector("#host").value,port:parseInt(document.querySelector("#port").value),dbname:document.querySelector("#dbname").value,question:document.querySelector("#query").value};const a=JSON.stringify(n);try{let e=await fetch("/query/build",{method:"POST",body:a,headers:{"Content-Type":"application/json"}}),o=await e.json();console.log(o),o.ok?document.querySelector("#generatedQuery").innerHTML=o.message:(console.log("show the goddamn error modal"),t(`Unable to build the query: ${o.message}`),setTimeout((()=>t("error")),5e3))}catch(e){t(`Unable to build the query: ${e}`),setTimeout((()=>t("error")),5e3)}finally{for(const e of r.elements)e.disabled=!1;o.innerText="Submit"}}))})();